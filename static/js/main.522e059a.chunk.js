(this.webpackJsonpwebb=this.webpackJsonpwebb||[]).push([[0],{60:function(e,t,n){e.exports=n(72)},72:function(e,t,n){"use strict";n.r(t);var r=n(17),a=n(0),c=n(18),o=n(15),u=n(20),s=n(50),i=n(5),l=n(6),m=(n(69),n(7)),f=n(76),p=n(78),d=n(53);function b(){var e=Object(i.a)(["\n    border: none;\n    padding: 0;\n    background: none;\n    cursor: pointer;\n    \n    &:focus {\n        outline: none;\n    }\n"]);return b=function(){return e},e}function g(){var e=Object(i.a)(["\n    width: 80%;\n    background-color: ",";\n    border-radius: 18px;\n    padding-top: 8px;\n    padding-bottom: 8px;\n"]);return g=function(){return e},e}function E(){var e=Object(i.a)(["\n    padding-top: 25px; \n    padding-bottom: 25px;\n    border-color: #f1f1f1;\n    box-shadow: 0 0 9px ",";\n    \n    &:focus {\n        outline: 1px solid ",";\n        border-color: transparent;\n        box-shadow: 0 0 9px ",";\n    }\n"]);return E=function(){return e},e}function h(){var e=Object(i.a)(["\n    @import url('https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600&display=swap');\n    \n    body {\n        color: ",";\n        background-color: ",";\n        font-family: 'Open Sans', sans-serif;\n    }\n"]);return h=function(){return e},e}Object(l.b)(h(),"#6b7077","#FAFBFD");var v=Object(l.a)(E(),"#EDF0F7","#F2F6FF","#DAE3FF"),O=Object(l.a)(g(),"#436EEE"),j=Object(l.a)(b()),y=n(9);function w(){return{setItem:function(e,t){localStorage.setItem("".concat("type","_").concat(e),JSON.stringify(t))},getItem:function(e){var t=localStorage.getItem("".concat("type","_").concat(e));return t?JSON.parse(t):void 0},removeItem:function(e){localStorage.removeItem("".concat("type","_").concat(e))}}}var x=[{username:"user1",password:"user1",fullName:"User 1",id:"user1id"},{username:"user2",password:"user2",fullName:"User 2",id:"user2id"}],S=w(),T=function(){var e=a.useState(null),t=Object(y.a)(e,2),n=t[0],r=t[1],c=a.useState(""),o=Object(y.a)(c,2),u=o[0],s=o[1];return{login:function(e,t){var n=function(e,t){return x.find((function(n){return e===n.username&&t===n.password}))}(e,t);n?r(n):s("User does not exist")},logout:function(){return new Promise((function(e){e(S.removeItem("user"))}))},isLoggedIn:function(){return!!S.getItem("user")},userData:n,error:u}};function N(){var e=Object(i.a)(["\n    margin-top: 30px;\n"]);return N=function(){return e},e}function k(){var e=Object(i.a)(["\n    text-align: center;\n    max-width: 400px;\n    margin: 0 auto;\n"]);return k=function(){return e},e}function I(){var e=Object(i.a)(["\n    padding-top: 50px;\n"]);return I=function(){return e},e}var _=Object(l.a)(I()),G=Object(l.a)(k()),C=Object(l.a)(N()),D=w(),P=a.memo((function(e){var t=a.useRef(null),n=a.useRef(null),r=Object(m.g)(),c=T(),o=c.login,u=c.userData,s=c.error,i=function(){var e=t.current.value,r=n.current.value;o(e,r)},l=function(e){"Enter"===e.key&&i()};return a.useEffect((function(){return document.addEventListener("keypress",l),function(){document.removeEventListener("keypress",l)}}),[]),a.useEffect((function(){u&&(D.setItem("user",u),e.setUserData(u),r.push("/play"))}),[u]),a.createElement("div",{className:_},a.createElement(f.a,{className:G,onSubmit:i},s&&a.createElement(p.a,{variant:"danger"},s),a.createElement(f.a.Group,{controlId:"validationCustom01"},a.createElement(f.a.Control,{required:!0,ref:t,className:"".concat(v," "),type:"text",placeholder:"Username"})),a.createElement(f.a.Group,{controlId:"formBasicPassword"},a.createElement(f.a.Control,{required:!0,ref:n,className:"".concat(v),type:"password",placeholder:"Password"})),a.createElement(d.a,{className:"".concat(O," ").concat(C),type:"button",onClick:i},"Login")))})),L=Object(o.b)(null,(function(e){return{setUserData:function(t){return e(function(e){return function(t){return t({type:"TOGGLE_LOGE_IN",payload:e})}}(t))}}}))(P),F=n(75),W=n(22),M=n(35),A=function(e){return e.ok?e.json().then((function(t){if(t.error)throw{status:e.status,message:t.error.message};return t})):e.json().then((function(t){throw{status:e.status,message:t.error.message}}),(function(){throw{status:e.status,message:e.statusText}}))},B=function(e){throw{message:e.message||e.statusText}};var U=function(e){return e.typingText},R=n(57);function X(){var e=Object(i.a)(["\n    color: ",";\n    position: relative;\n    \n    ","\n"]);return X=function(){return e},e}function J(){var e=Object(i.a)(["\n    from {\n        opacity: 0;\n    }\n    \n    to {\n        opacity: 1;\n    }\n"]);return J=function(){return e},e}var q=Object(l.c)(J()),z=R.a.span(X(),(function(e){return e.color}),(function(e){return e.showCursor&&"\n        &:after {\n            animation: ".concat(q," 0.4s linear infinite alternate;\n            content: '';\n            position: absolute;\n            width: 1px;\n            height: 100%;\n            right: 0;\n            background-color blue;\n        }\n    ")})),V=a.memo((function(e){return e.characters?a.createElement(z,{color:e.color,showCursor:e.showCursor,"data-testid":e.testId},e.characters):null}));function Y(){return{getWpm:function(e,t){return Math.round(60*e.length/(5*t))},calculateCompletionPercent:function(e,t){var n=t.split(" ").length;return Math.round(e/n*100)},getAverage:function(e,t){return Math.round(e.reduce((function(e,n){return e+n[t]}),0)/e.length)}}}var K=n(77);function $(){var e=Object(i.a)(["\n    animation: "," 1.4s infinite linear;\n"]);return $=function(){return e},e}function H(){var e=Object(i.a)(["\n    align-items: center;\n    bottom: 0;\n    background-color: rgba(255,255,255,0.4);\n    display: flex;\n    left: 0;\n    right: 0;\n    top: 0;\n    justify-content: center;\n    position: absolute;\n"]);return H=function(){return e},e}function Q(){var e=Object(i.a)(["\n    0% {\n        transform: rotate(0) \n    }\n    \n    100% {\n        transform: rotate(360deg) \n    }\n"]);return Q=function(){return e},e}var Z=Object(l.c)(Q()),ee=Object(l.a)(H()),te=Object(l.a)($(),Z),ne=a.memo((function(e){return e.isLoading?a.createElement("div",{className:ee},a.createElement(K.a,{size:"40px",color:"#436EEE",className:te})):null}));function re(){var e=Object(i.a)(["\n    display: flex;\n    padding: 20px 0;\n    span:first-child {\n        margin-right: 20px\n    }\n"]);return re=function(){return e},e}var ae=Object(l.a)(re()),ce=a.memo((function(e){return a.createElement("div",{className:ae},a.createElement("span",null,"TIME: ",e.time),a.createElement("span",null,"WPM: ",e.wpm))})),oe=n(74),ue=function(e){return e.passedGames},se=a.memo((function(e){var t=e.index,n=e.data,r=n.wpm,c=n.completionPercent,o=n.correctWordsCount;return a.createElement("tr",null,a.createElement("td",null,t||"Average"),a.createElement("td",null,r),a.createElement("td",null,c),a.createElement("td",null,o))}));function ie(){var e=Object(i.a)(["\n    margin-top: 50px;\n"]);return ie=function(){return e},e}var le=Object(l.a)(ie()),me=a.memo((function(e){var t=Y().getAverage,n={wpm:t(e.passedGames,"wpm"),completionPercent:t(e.passedGames,"completionPercent"),correctWordsCount:t(e.passedGames,"correctWordsCount")};return e.passedGames.length?a.createElement(oe.a,{striped:!0,bordered:!0,hover:!0,className:le,"data-testid":"passed-games-table"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"#"),a.createElement("th",null,"WPM"),a.createElement("th",null,"Completion %"),a.createElement("th",null,"Correct words"))),a.createElement("tbody",null,e.passedGames.map((function(e,t){return a.createElement(se,{data:e,index:++t,key:t})})),a.createElement(se,{data:n}))):null})),fe=Object(o.b)((function(e){return{passedGames:ue(e)}}))(me),pe=n(56),de=function(e){return e.userData};function be(){var e=Object(i.a)(["\n    color: #fff;\n"]);return be=function(){return e},e}function ge(){var e=Object(i.a)(["\n    border-radius: 3px;\n    color: #fff;\n"]);return ge=function(){return e},e}var Ee=Object(l.a)(ge()),he=Object(l.a)(be()),ve=a.memo((function(e){var t=Object(m.g)(),n=T().logout;return a.createElement(pe.a,{bg:"dark",variant:"dark",className:Ee},a.createElement("div",{className:"mr-auto"},"Welcome ",a.createElement("span",{className:"font-weight-bold"},e.userData.fullName)),a.createElement("button",{className:"".concat(j," ").concat(he),onClick:function(){n().then((function(){t.push("/login")}))}},"Logout ",a.createElement(K.b,{size:27,color:"#fff"})))})),Oe=Object(o.b)((function(e){return{userData:de(e)}}))(ve);function je(){var e=Object(i.a)(["\n    display: block;\n    margin-top: 20px\n"]);return je=function(){return e},e}function ye(){var e=Object(i.a)(["\n    width: 100%;\n    padding: 5px;\n"]);return ye=function(){return e},e}function we(){var e=Object(i.a)(["\n    letter-spacing: 0.5px;\n    margin-bottom: 20px;\n    min-height: 150px;\n    border: 1px solid ",";\n    border-radius: 3px;\n    padding: 12px;\n    position: relative;\n"]);return we=function(){return e},e}var xe=Object(l.a)(we(),"#dee2e6"),Se=Object(l.a)(ye()),Te=Object(l.a)(je()),Ne=a.memo((function(e){var t=a.useState(""),n=Object(y.a)(t,2),c=n[0],o=n[1],u=a.useState(""),s=Object(y.a)(u,2),i=s[0],l=s[1],m=a.useState(!1),f=Object(y.a)(m,2),p=f[0],b=f[1],g=a.useState(!1),E=Object(y.a)(g,2),h=E[0],v=E[1],O=a.useState(""),j=Object(y.a)(O,2),w=j[0],x=j[1],S=a.useState(""),T=Object(y.a)(S,2),N=T[0],k=T[1],I=a.useState(60),_=Object(y.a)(I,2),G=_[0],C=_[1],D=a.useState([]),P=Object(y.a)(D,2),L=P[0],F=P[1],W=a.useState(0),U=Object(y.a)(W,2),R=U[0],X=U[1],J=a.useState(null),q=Object(y.a)(J,2),z=q[0],K=q[1],$=a.useState(""),H=Object(y.a)($,2),Q=H[0],Z=H[1],ee=a.useRef(null),te=Y(),re=te.getWpm,ae=te.calculateCompletionPercent;a.useEffect((function(){if(e.typingText){var t=setInterval((function(){C((function(e){return e-1}))}),1e3);K(t)}return function(){clearInterval(z)}}),[e.typingText]),a.useEffect((function(){X(re(Q.split(" ").join(""),G)),0===G&&ue()}),[G]);var oe=function(t){e.setTypingText(t),l(t),F(t.split(" ")),b(!1),ee.current.focus()},ue=function(){clearInterval(z);var t=Q.split(" ").length;e.setPassedGame({wpm:R,correctWordsCount:Q.split(" ").length,completionPercent:ae(t,i)}),v(!1),C(60),l(""),X(0),Z(""),k(""),x(""),o("")},se=function(e){if("Backspace"===e)if(w){var t=w.substring(w.length-1);x(w.substring(0,w.length-1)),l("".concat(t).concat(i))}else{var n=N.substring(N.length-1);k((function(e){return e.substring(0,e.length-1)})),l("".concat(n).concat(i))}},ie=function(e){w||i[0]!==e||"Backspace"===e||(k((function(t){return"".concat(t).concat(e)})),l(i.substring(1))),(w&&i[0]===e||i[0]!==e)&&"Backspace"!==e&&(x("".concat(w).concat(i[0])),l(i.substring(1)))},le=function(e){" "!==e||L[0]!==N||w||(o(""),Z((function(e){return"".concat(e).concat(N," ")})),k(""),x(""),F((function(e){var t=Object(M.a)(e);return t.splice(0,1),t})))};return a.createElement("div",null,a.createElement(Oe,null),a.createElement(ce,{time:G,wpm:R}),a.createElement("div",{className:xe},a.createElement(ne,{isLoading:p}),a.createElement(V,{characters:Q,showCursor:!1,color:"blue",testId:"passed-words"}),a.createElement(V,{characters:N,showCursor:!w,color:"blue",testId:"correct-chars"}),w&&a.createElement(V,{characters:w,showCursor:!!w,color:"red",testId:"wrong-chars"}),i||null),a.createElement("input",{disabled:!i,ref:ee,type:"text",className:Se,onKeyDown:function(e){var t;(t=e.key).length>1&&"Backspace"!==t||(ie(e.key),se(e.key),le(e.key))},onChange:function(e){o(e.target.value),""===e.target.value&&(l("".concat(N).concat(w).concat(i)),k(""),x(""))},placeholder:"Type the above text here",value:c}),a.createElement(d.a,{disabled:h,className:Te,onClick:function(){b(!0),v(!0),function(e,t,n){var a,c={method:t,headers:{"Content-Type":"application/json"}};return a=n?Object(r.a)({},c,{body:JSON.stringify(n)}):Object(r.a)({},c),fetch(e,a).then(A,B)}("https://cors-anywhere.herokuapp.com/https://baconipsum.com/api/?type=all-meat&paras=1&start-with-lorem=1","GET").then((function(e){oe(e[0])})).catch((function(){b(!1),v(!1)}))}},"Start"),a.createElement(fe,null))})),ke=Object(o.b)((function(e){return{typingText:U(e)}}),(function(e){return{setTypingText:function(t){return e(function(e){return{type:"SET_TYPING_TEXT",payload:e}}(t))},setPassedGame:function(t){return e(function(e){return{type:"SET_PASSED_GAME",payload:e}}(t))}}}))(Ne),Ie=n(58),_e=a.memo((function(e){var t=e.children,n=Object(Ie.a)(e,["children"]),r=T().isLoggedIn;return a.createElement(m.b,Object.assign({},n,{render:function(e){return r()?t:a.createElement(m.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}));function Ge(){var e=Object(i.a)(["\n    position: relative;\n"]);return Ge=function(){return e},e}var Ce=Object(l.a)(Ge()),De=function(){return a.createElement(F.a,{className:Ce},a.createElement(W.a,null,a.createElement(m.d,null,a.createElement(m.b,{exact:!0,path:"/webb"},a.createElement(m.a,{to:"/play"})),a.createElement(m.b,{exact:!0,strict:!0,path:"/login"},a.createElement(L,null)),a.createElement(_e,{exact:!0,path:"/play"},a.createElement(ke,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Pe,Le={typingText:"",passedGames:[],userData:null},Fe=w().getItem("user"),We=Object(r.a)({},Le,{userData:Fe||Le.userData}),Me=Object(u.d)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TYPING_TEXT":return Object(r.a)({},e,{typingText:t.payload});case"SET_PASSED_GAME":return Object(r.a)({},e,{passedGames:[].concat(Object(M.a)(e.passedGames),[t.payload])});case"TOGGLE_LOGE_IN":return Object(r.a)({},e,{userData:t.payload});default:return e}}),We,(Pe="typeRacer",window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({name:Pe})||u.c)(Object(u.a)(s.a)));c.render(a.createElement(o.a,{store:Me},a.createElement(De,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[60,1,2]]]);
//# sourceMappingURL=main.522e059a.chunk.js.map