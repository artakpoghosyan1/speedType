(this.webpackJsonpwebb=this.webpackJsonpwebb||[]).push([[0],{60:function(e,t,n){e.exports=n(72)},72:function(e,t,n){"use strict";n.r(t);var r=n(17),a=n(0),c=n(18),o=n(15),u=n(20),s=n(50),i=n(5),l=n(6),m=(n(69),n(7)),f=n(76),d=n(78),p=n(53);function b(){var e=Object(i.a)(["\n    border: none;\n    padding: 0;\n    background: none;\n    cursor: pointer;\n    \n    &:focus {\n        outline: none;\n    }\n"]);return b=function(){return e},e}function g(){var e=Object(i.a)(["\n    width: 80%;\n    background-color: ",";\n    border-radius: 18px;\n    padding-top: 8px;\n    padding-bottom: 8px;\n"]);return g=function(){return e},e}function E(){var e=Object(i.a)(["\n    padding-top: 25px; \n    padding-bottom: 25px;\n    border-color: #f1f1f1;\n    box-shadow: 0 0 9px ",";\n    \n    &:focus {\n        outline: 1px solid ",";\n        border-color: transparent;\n        box-shadow: 0 0 9px ",";\n    }\n"]);return E=function(){return e},e}function h(){var e=Object(i.a)(["\n    @import url('https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600&display=swap');\n    \n    body {\n        color: ",";\n        background-color: ",";\n        font-family: 'Open Sans', sans-serif;\n    }\n"]);return h=function(){return e},e}Object(l.b)(h(),"#6b7077","#FAFBFD");var v=Object(l.a)(E(),"#EDF0F7","#F2F6FF","#DAE3FF"),O=Object(l.a)(g(),"#436EEE"),j=Object(l.a)(b()),y=n(9);function w(){return{setItem:function(e,t){localStorage.setItem("".concat("type","_").concat(e),JSON.stringify(t))},getItem:function(e){var t=localStorage.getItem("".concat("type","_").concat(e));return t?JSON.parse(t):void 0},removeItem:function(e){localStorage.removeItem("".concat("type","_").concat(e))}}}var x=[{username:"user1",password:"user1",fullName:"User 1",id:"user1id"},{username:"user2",password:"user2",fullName:"User 2",id:"user2id"}],G=w(),S=function(){var e=a.useState(null),t=Object(y.a)(e,2),n=t[0],r=t[1],c=a.useState(""),o=Object(y.a)(c,2),u=o[0],s=o[1];return{login:function(e,t){var n=function(e,t){return x.find((function(n){return e===n.username&&t===n.password}))}(e,t);n?r(n):s("User does not exist")},logout:function(){return new Promise((function(e){e(G.removeItem("user"))}))},isLoggedIn:function(){return!!G.getItem("user")},userData:n,error:u}};function I(e){return{type:"SET_PASSED_GAME",payload:e}}function T(){var e=Object(i.a)(["\n    margin-top: 30px;\n"]);return T=function(){return e},e}function N(){var e=Object(i.a)(["\n    text-align: center;\n    max-width: 400px;\n    margin: 0 auto;\n"]);return N=function(){return e},e}function k(){var e=Object(i.a)(["\n    padding-top: 50px;\n"]);return k=function(){return e},e}var _=Object(l.a)(k()),C=Object(l.a)(N()),D=Object(l.a)(T()),P=w(),L=a.memo((function(e){var t=a.useRef(null),n=a.useRef(null),r=Object(m.g)(),c=S(),o=c.login,u=c.userData,s=c.error,i=function(){var e=t.current.value,r=n.current.value;o(e,r)},l=function(e){"Enter"===e.key&&i()};return a.useEffect((function(){return document.addEventListener("keypress",l),function(){document.removeEventListener("keypress",l)}}),[]),a.useEffect((function(){if(u){P.setItem("user",u),e.setUserData(u);var t=P.getItem("passedGames-".concat(u.id));e.setPassedGame(t||null),r.push("/play")}}),[u]),a.createElement("div",{className:_},a.createElement(f.a,{className:C,onSubmit:i},s&&a.createElement(d.a,{variant:"danger"},s),a.createElement(f.a.Group,{controlId:"validationCustom01"},a.createElement(f.a.Control,{required:!0,ref:t,className:"".concat(v," "),type:"text",placeholder:"Username"})),a.createElement(f.a.Group,{controlId:"formBasicPassword"},a.createElement(f.a.Control,{required:!0,ref:n,className:"".concat(v),type:"password",placeholder:"Password"})),a.createElement(p.a,{className:"".concat(O," ").concat(D),type:"button",onClick:i},"Login")))})),F=Object(o.b)(null,(function(e){return{setUserData:function(t){return e(function(e){return function(t){return t({type:"TOGGLE_LOGE_IN",payload:e})}}(t))},setPassedGame:function(t){return e(I(t))}}}))(L),W=n(75),M=n(22),A=n(43),B=function(e){return e.ok?e.json().then((function(t){if(t.error)throw{status:e.status,message:t.error.message};return t})):e.json().then((function(t){throw{status:e.status,message:t.error.message}}),(function(){throw{status:e.status,message:e.statusText}}))},U=function(e){throw{message:e.message||e.statusText}};var R=function(e){return e.typingText},X=n(57);function J(){var e=Object(i.a)(["\n    color: ",";\n    position: relative;\n    \n    ","\n"]);return J=function(){return e},e}function q(){var e=Object(i.a)(["\n    from {\n        opacity: 0;\n    }\n    \n    to {\n        opacity: 1;\n    }\n"]);return q=function(){return e},e}var z=Object(l.c)(q()),V=X.a.span(J(),(function(e){return e.color}),(function(e){return e.showCursor&&"\n        &:after {\n            animation: ".concat(z," 0.4s linear infinite alternate;\n            content: '';\n            position: absolute;\n            width: 1px;\n            height: 100%;\n            right: 0;\n            background-color blue;\n        }\n    ")})),Y=a.memo((function(e){return e.characters?a.createElement(V,{color:e.color,showCursor:e.showCursor,"data-testid":e.testId},e.characters):null}));function K(){return{getWpm:function(e,t){return Math.round(60*e.length/(5*t))},calculateCompletionPercent:function(e,t){var n=t.split(" ").length;return Math.round(e/n*100)},getAverage:function(e,t){return Math.round(e.reduce((function(e,n){return e+n[t]}),0)/e.length)}}}var $=n(77);function H(){var e=Object(i.a)(["\n    animation: "," 1.4s infinite linear;\n"]);return H=function(){return e},e}function Q(){var e=Object(i.a)(["\n    align-items: center;\n    bottom: 0;\n    background-color: rgba(255,255,255,0.4);\n    display: flex;\n    left: 0;\n    right: 0;\n    top: 0;\n    justify-content: center;\n    position: absolute;\n"]);return Q=function(){return e},e}function Z(){var e=Object(i.a)(["\n    0% {\n        transform: rotate(0) \n    }\n    \n    100% {\n        transform: rotate(360deg) \n    }\n"]);return Z=function(){return e},e}var ee=Object(l.c)(Z()),te=Object(l.a)(Q()),ne=Object(l.a)(H(),ee),re=a.memo((function(e){return e.isLoading?a.createElement("div",{className:te},a.createElement($.a,{size:"40px",color:"#436EEE",className:ne})):null}));function ae(){var e=Object(i.a)(["\n    display: flex;\n    padding: 20px 0;\n    span:first-child {\n        margin-right: 20px\n    }\n"]);return ae=function(){return e},e}var ce=Object(l.a)(ae()),oe=a.memo((function(e){return a.createElement("div",{className:ce},a.createElement("span",null,"TIME: ",e.time),a.createElement("span",null,"WPM: ",e.wpm))})),ue=n(74),se=function(e){return e.passedGames},ie=a.memo((function(e){var t=e.index,n=e.data,r=n.wpm,c=n.correctWordsCount,o=n.completionPercent;return a.createElement("tr",null,a.createElement("td",null,t||"Average"),a.createElement("td",null,r),a.createElement("td",null,o),a.createElement("td",null,c))}));function le(){var e=Object(i.a)(["\n    margin-top: 50px;\n"]);return le=function(){return e},e}var me=Object(l.a)(le()),fe=a.memo((function(e){var t=K().getAverage,n={wpm:t(e.passedGames,"wpm"),completionPercent:t(e.passedGames,"completionPercent"),correctWordsCount:t(e.passedGames,"correctWordsCount")};return e.passedGames.length?a.createElement(ue.a,{striped:!0,bordered:!0,hover:!0,className:me,"data-testid":"passed-games-table"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"#"),a.createElement("th",null,"WPM"),a.createElement("th",null,"Completion %"),a.createElement("th",null,"Correct words"))),a.createElement("tbody",null,e.passedGames.map((function(e,t){return a.createElement(ie,{data:e,index:++t,key:t})})),a.createElement(ie,{data:n}))):null})),de=Object(o.b)((function(e){return{passedGames:se(e)}}))(fe),pe=n(56),be=function(e){return e.userData};function ge(){var e=Object(i.a)(["\n    color: #fff;\n"]);return ge=function(){return e},e}function Ee(){var e=Object(i.a)(["\n    border-radius: 3px;\n    color: #fff;\n"]);return Ee=function(){return e},e}var he=Object(l.a)(Ee()),ve=Object(l.a)(ge()),Oe=a.memo((function(e){var t=Object(m.g)(),n=S().logout;return a.createElement(pe.a,{bg:"dark",variant:"dark",className:he},a.createElement("div",{className:"mr-auto"},"Welcome ",a.createElement("span",{className:"font-weight-bold"},e.userData.fullName)),a.createElement("button",{className:"".concat(j," ").concat(ve),onClick:function(){n().then((function(){t.push("/login"),e.setPassedGame(null)}))}},"Logout ",a.createElement($.b,{size:27,color:"#fff"})))})),je=Object(o.b)((function(e){return{userData:be(e)}}),(function(e){return{setPassedGame:function(t){return e(I(t))}}}))(Oe);function ye(){var e=Object(i.a)(["\n    display: block;\n    margin-top: 20px\n"]);return ye=function(){return e},e}function we(){var e=Object(i.a)(["\n    width: 100%;\n    padding: 5px;\n"]);return we=function(){return e},e}function xe(){var e=Object(i.a)(["\n    letter-spacing: 0.5px;\n    margin-bottom: 20px;\n    min-height: 150px;\n    border: 1px solid ",";\n    border-radius: 3px;\n    padding: 12px;\n    position: relative;\n"]);return xe=function(){return e},e}var Ge=Object(l.a)(xe(),"#dee2e6"),Se=Object(l.a)(we()),Ie=Object(l.a)(ye()),Te=w(),Ne=a.memo((function(e){var t=a.useState(""),n=Object(y.a)(t,2),c=n[0],o=n[1],u=a.useState(""),s=Object(y.a)(u,2),i=s[0],l=s[1],m=a.useState(!1),f=Object(y.a)(m,2),d=f[0],b=f[1],g=a.useState(!1),E=Object(y.a)(g,2),h=E[0],v=E[1],O=a.useState(""),j=Object(y.a)(O,2),w=j[0],x=j[1],G=a.useState(""),S=Object(y.a)(G,2),I=S[0],T=S[1],N=a.useState(60),k=Object(y.a)(N,2),_=k[0],C=k[1],D=a.useState([]),P=Object(y.a)(D,2),L=P[0],F=P[1],W=a.useState(0),M=Object(y.a)(W,2),R=M[0],X=M[1],J=a.useState(null),q=Object(y.a)(J,2),z=q[0],V=q[1],$=a.useState(""),H=Object(y.a)($,2),Q=H[0],Z=H[1],ee=a.useRef(null),te=K(),ne=te.getWpm,ae=te.calculateCompletionPercent;a.useEffect((function(){if(e.typingText){var t=setInterval((function(){C((function(e){return e-1}))}),1e3);V(t)}return function(){clearInterval(z)}}),[e.typingText]),a.useEffect((function(){X(ne(Q.split(" ").join(""),_)),0===_&&ue()}),[_]),a.useEffect((function(){e.passedGames.length&&Te.setItem("passedGames-".concat(e.userData.id),e.passedGames)}),[e.passedGames]);var ce=function(t){e.setTypingText(t),l(t),F(t.split(" ")),b(!1),ee.current.focus()},ue=function(){clearInterval(z);var t=Q?Q.split(" ").length:0,n=Q?Q.split(" ").length:0,r=[].concat(Object(A.a)(e.passedGames),[{wpm:R,correctWordsCount:n,completionPercent:ae(t,i)}]);e.setPassedGame(r),v(!1),C(60),l(""),X(0),Z(""),T(""),x(""),o("")},se=function(e){if("Backspace"===e)if(w){var t=w.substring(w.length-1);x(w.substring(0,w.length-1)),l("".concat(t).concat(i))}else{var n=I.substring(I.length-1);T((function(e){return e.substring(0,e.length-1)})),l("".concat(n).concat(i))}},ie=function(e){w||i[0]!==e||"Backspace"===e||(T((function(t){return"".concat(t).concat(e)})),l(i.substring(1))),(w&&i[0]===e||i[0]!==e)&&"Backspace"!==e&&(x("".concat(w).concat(i[0])),l(i.substring(1)))},le=function(e){" "!==e||L[0]!==I||w||(o(""),Z((function(e){return"".concat(e).concat(I," ")})),T(""),x(""),F((function(e){var t=Object(A.a)(e);return t.splice(0,1),t})))};return a.createElement("div",null,a.createElement(je,null),a.createElement(oe,{time:_,wpm:R}),a.createElement("div",{className:Ge},a.createElement(re,{isLoading:d}),a.createElement(Y,{characters:Q,showCursor:!1,color:"blue",testId:"passed-words"}),a.createElement(Y,{characters:I,showCursor:!w,color:"blue",testId:"correct-chars"}),w&&a.createElement(Y,{characters:w,showCursor:!!w,color:"red",testId:"wrong-chars"}),i||null),a.createElement("input",{disabled:!i,ref:ee,type:"text",className:Se,onKeyDown:function(e){var t;(t=e.key).length>1&&"Backspace"!==t||(ie(e.key),se(e.key),le(e.key))},onChange:function(e){o(e.target.value),""===e.target.value&&(l("".concat(I).concat(w).concat(i)),T(""),x(""))},placeholder:"Type the above text here",value:c}),a.createElement(p.a,{disabled:h,className:Ie,onClick:function(){b(!0),v(!0),function(e,t,n){var a,c={method:t,headers:{"Content-Type":"application/json"}};return a=n?Object(r.a)({},c,{body:JSON.stringify(n)}):Object(r.a)({},c),fetch(e,a).then(B,U)}("https://cors-anywhere.herokuapp.com/https://baconipsum.com/api/?type=all-meat&paras=1&start-with-lorem=1","GET").then((function(e){ce(e[0])})).catch((function(){b(!1),v(!1)}))}},"Start"),a.createElement(de,null))})),ke=Object(o.b)((function(e){return{typingText:R(e),passedGames:se(e),userData:be(e)}}),(function(e){return{setTypingText:function(t){return e(function(e){return{type:"SET_TYPING_TEXT",payload:e}}(t))},setPassedGame:function(t){return e(I(t))}}}))(Ne),_e=n(58),Ce=a.memo((function(e){var t=e.children,n=Object(_e.a)(e,["children"]),r=S().isLoggedIn;return a.createElement(m.b,Object.assign({},n,{render:function(e){return r()?t:a.createElement(m.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}));function De(){var e=Object(i.a)(["\n    position: relative;\n"]);return De=function(){return e},e}var Pe=Object(l.a)(De()),Le=function(){return a.createElement(W.a,{className:Pe},a.createElement(M.a,null,a.createElement(m.d,null,a.createElement(m.b,{exact:!0,path:"/speedType"},a.createElement(m.a,{to:"/play"})),a.createElement(m.b,{exact:!0,strict:!0,path:"/login"},a.createElement(F,null)),a.createElement(Ce,{exact:!0,path:"/play"},a.createElement(ke,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Fe,We={typingText:"",passedGames:[],userData:null},Me=w(),Ae=Me.getItem("user"),Be=Ae&&Me.getItem("passedGames-".concat(Ae.id))?Me.getItem("passedGames-".concat(Ae.id)):We.passedGames,Ue=Object(r.a)({},We,{passedGames:Be,userData:Ae||We.userData}),Re=Object(u.d)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TYPING_TEXT":return Object(r.a)({},e,{typingText:t.payload});case"SET_PASSED_GAME":return Object(r.a)({},e,{passedGames:t.payload?t.payload:[]});case"TOGGLE_LOGE_IN":return Object(r.a)({},e,{userData:t.payload});default:return e}}),Ue,(Fe="typeRacer",window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({name:Fe})||u.c)(Object(u.a)(s.a)));c.render(a.createElement(o.a,{store:Re},a.createElement(Le,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[60,1,2]]]);
//# sourceMappingURL=main.df4a99b9.chunk.js.map