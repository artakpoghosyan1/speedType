(this.webpackJsonpwebb=this.webpackJsonpwebb||[]).push([[0],{60:function(e,t,n){e.exports=n(72)},72:function(e,t,n){"use strict";n.r(t);var a=n(17),r=n(0),c=n(18),o=n(15),u=n(20),s=n(50),i=n(5),l=n(6),m=(n(69),n(7)),f=n(76),d=n(78),p=n(53);function b(){var e=Object(i.a)(["\n    border: none;\n    padding: 0;\n    background: none;\n    cursor: pointer;\n    \n    &:focus {\n        outline: none;\n    }\n"]);return b=function(){return e},e}function g(){var e=Object(i.a)(["\n    width: 80%;\n    background-color: ",";\n    border-radius: 18px;\n    padding-top: 8px;\n    padding-bottom: 8px;\n"]);return g=function(){return e},e}function E(){var e=Object(i.a)(["\n    padding-top: 25px; \n    padding-bottom: 25px;\n    border-color: #f1f1f1;\n    box-shadow: 0 0 9px ",";\n    \n    &:focus {\n        outline: 1px solid ",";\n        border-color: transparent;\n        box-shadow: 0 0 9px ",";\n    }\n"]);return E=function(){return e},e}function h(){var e=Object(i.a)(["\n    @import url('https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600&display=swap');\n    \n    body {\n        color: ",";\n        background-color: ",";\n        font-family: 'Open Sans', sans-serif;\n    }\n"]);return h=function(){return e},e}Object(l.b)(h(),"#6b7077","#FAFBFD");var v=Object(l.a)(E(),"#EDF0F7","#F2F6FF","#DAE3FF"),O=Object(l.a)(g(),"#436EEE"),j=Object(l.a)(b()),y=n(9);function w(){return{setItem:function(e,t){localStorage.setItem("".concat("type","_").concat(e),JSON.stringify(t))},getItem:function(e){var t=localStorage.getItem("".concat("type","_").concat(e));return t?JSON.parse(t):void 0},removeItem:function(e){localStorage.removeItem("".concat("type","_").concat(e))}}}var x=[{username:"user1",password:"user1",fullName:"User 1",id:"user1id"},{username:"user2",password:"user2",fullName:"User 2",id:"user2id"}],G=w(),S=function(){var e=r.useState(null),t=Object(y.a)(e,2),n=t[0],a=t[1],c=r.useState(""),o=Object(y.a)(c,2),u=o[0],s=o[1];return{login:function(e,t){var n=function(e,t){return x.find((function(n){return e===n.username&&t===n.password}))}(e,t);n?a(n):s("User does not exist")},logout:function(){return new Promise((function(e){e(G.removeItem("user"))}))},isLoggedIn:function(){return!!G.getItem("user")},userData:n,error:u}};function T(e){return{type:"SET_PASSED_GAME",payload:e}}function I(){var e=Object(i.a)(["\n    margin-top: 30px;\n"]);return I=function(){return e},e}function N(){var e=Object(i.a)(["\n    text-align: center;\n    max-width: 400px;\n    margin: 0 auto;\n"]);return N=function(){return e},e}function k(){var e=Object(i.a)(["\n    padding-top: 50px;\n"]);return k=function(){return e},e}var _=Object(l.a)(k()),C=Object(l.a)(N()),D=Object(l.a)(I()),P=w(),L=r.memo((function(e){var t=r.useRef(null),n=r.useRef(null),a=Object(m.g)(),c=S(),o=c.login,u=c.userData,s=c.error,i=function(){var e=t.current.value,a=n.current.value;o(e,a)},l=function(e){"Enter"===e.key&&i()};return r.useEffect((function(){return document.addEventListener("keypress",l),function(){document.removeEventListener("keypress",l)}}),[]),r.useEffect((function(){if(u){P.setItem("user",u),e.setUserData(u);var t=P.getItem("passedGames-".concat(u.id));e.setPassedGame(t||null),a.push("/play")}}),[u]),r.createElement("div",{className:_},r.createElement(f.a,{className:C,onSubmit:i},s&&r.createElement(d.a,{variant:"danger"},s),r.createElement(f.a.Group,null,r.createElement(f.a.Control,{ref:t,className:"".concat(v," "),type:"text",placeholder:"Username"})),r.createElement(f.a.Group,null,r.createElement(f.a.Control,{ref:n,className:"".concat(v),type:"password",placeholder:"Password"})),r.createElement(p.a,{className:"".concat(O," ").concat(D),type:"button",onClick:i},"Login")))})),F=Object(o.b)(null,(function(e){return{setUserData:function(t){return e(function(e){return function(t){return t({type:"TOGGLE_LOGE_IN",payload:e})}}(t))},setPassedGame:function(t){return e(T(t))}}}))(L),W=n(75),M=n(22),A=n(44),U=function(e){return e.ok?e.json().then((function(t){if(t.error)throw{status:e.status,message:t.error.message};return t})):e.json().then((function(t){throw{status:e.status,message:t.error.message}}),(function(){throw{status:e.status,message:e.statusText}}))},B=function(e){throw{message:e.message||e.statusText}};var R=function(e){return e.typingText},X=n(57);function J(){var e=Object(i.a)(["\n    color: ",";\n    position: relative;\n    \n    ","\n"]);return J=function(){return e},e}function z(){var e=Object(i.a)(["\n    from {\n        opacity: 0;\n    }\n    \n    to {\n        opacity: 1;\n    }\n"]);return z=function(){return e},e}var V=Object(l.c)(z()),Y=X.a.span(J(),(function(e){return e.color}),(function(e){return e.showCursor&&"\n        &:after {\n            animation: ".concat(V," 0.4s linear infinite alternate;\n            content: '';\n            position: absolute;\n            width: 1px;\n            height: 100%;\n            right: 0;\n            background-color blue;\n        }\n    ")})),K=r.memo((function(e){return e.characters?r.createElement(Y,{color:e.color,showCursor:e.showCursor,"data-testid":e.testId},e.characters):null}));function $(){return{getWpm:function(e,t){return Math.round(e.length/5)},calculateCompletionPercent:function(e,t){var n=t.split(" ").length;return Math.round(e/n*100)},getAverage:function(e,t){return Math.round(e.reduce((function(e,n){return e+n[t]}),0)/e.length)}}}var q=n(77);function H(){var e=Object(i.a)(["\n    animation: "," 1.4s infinite linear;\n"]);return H=function(){return e},e}function Q(){var e=Object(i.a)(["\n    align-items: center;\n    bottom: 0;\n    background-color: rgba(255,255,255,0.4);\n    display: flex;\n    left: 0;\n    right: 0;\n    top: 0;\n    justify-content: center;\n    position: absolute;\n"]);return Q=function(){return e},e}function Z(){var e=Object(i.a)(["\n    0% {\n        transform: rotate(0) \n    }\n    \n    100% {\n        transform: rotate(360deg) \n    }\n"]);return Z=function(){return e},e}var ee=Object(l.c)(Z()),te=Object(l.a)(Q()),ne=Object(l.a)(H(),ee),ae=r.memo((function(e){return e.isLoading?r.createElement("div",{className:te,"data-testid":"loading"},r.createElement(q.a,{size:"40px",color:"#436EEE",className:ne})):null}));function re(){var e=Object(i.a)(["\n    display: flex;\n    padding: 20px 0;\n    span:first-child {\n        margin-right: 20px\n    }\n"]);return re=function(){return e},e}var ce=Object(l.a)(re()),oe=r.memo((function(e){return r.createElement("div",{className:ce},r.createElement("span",null,"TIME: ",e.time),r.createElement("span",null,"WPM: ",e.wpm))})),ue=n(74),se=function(e){return e.passedGames},ie=r.memo((function(e){var t=e.index,n=e.data,a=n.wpm,c=n.correctWordsCount,o=n.completionPercent;return r.createElement("tr",null,r.createElement("td",null,t||"Average"),r.createElement("td",null,a),r.createElement("td",null,o),r.createElement("td",null,c))}));function le(){var e=Object(i.a)(["\n    margin-top: 50px;\n"]);return le=function(){return e},e}var me=Object(l.a)(le()),fe=r.memo((function(e){var t=$().getAverage,n={wpm:t(e.passedGames,"wpm"),completionPercent:t(e.passedGames,"completionPercent"),correctWordsCount:t(e.passedGames,"correctWordsCount")};return e.passedGames.length?r.createElement(ue.a,{striped:!0,bordered:!0,hover:!0,className:me,"data-testid":"passed-games-table"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,"#"),r.createElement("th",null,"WPM"),r.createElement("th",null,"Completion %"),r.createElement("th",null,"Correct words"))),r.createElement("tbody",null,e.passedGames.map((function(e,t){return r.createElement(ie,{data:e,index:++t,key:t})})),r.createElement(ie,{data:n}))):null})),de=Object(o.b)((function(e){return{passedGames:se(e)}}))(fe),pe=n(56),be=function(e){return e.userData};function ge(){var e=Object(i.a)(["\n    color: #fff;\n"]);return ge=function(){return e},e}function Ee(){var e=Object(i.a)(["\n    border-radius: 3px;\n    color: #fff;\n"]);return Ee=function(){return e},e}var he=Object(l.a)(Ee()),ve=Object(l.a)(ge()),Oe=r.memo((function(e){var t=Object(m.g)(),n=S().logout;return r.createElement(pe.a,{bg:"dark",variant:"dark",className:he},r.createElement("div",{className:"mr-auto"},"Welcome ",r.createElement("span",{className:"font-weight-bold"},e.userData.fullName)),r.createElement("button",{className:"".concat(j," ").concat(ve),onClick:function(){n().then((function(){t.push("/login"),e.setPassedGame(null)}))}},"Logout ",r.createElement(q.b,{size:27,color:"#fff"})))})),je=Object(o.b)((function(e){return{userData:be(e)}}),(function(e){return{setPassedGame:function(t){return e(T(t))}}}))(Oe);function ye(){var e=Object(i.a)(["\n    display: block;\n    margin-top: 20px\n"]);return ye=function(){return e},e}function we(){var e=Object(i.a)(["\n    width: 100%;\n    padding: 5px;\n"]);return we=function(){return e},e}function xe(){var e=Object(i.a)(["\n    letter-spacing: 0.5px;\n    margin-bottom: 20px;\n    min-height: 150px;\n    border: 1px solid ",";\n    border-radius: 3px;\n    padding: 12px;\n    position: relative;\n"]);return xe=function(){return e},e}var Ge=Object(l.a)(xe(),"#dee2e6"),Se=Object(l.a)(we()),Te=Object(l.a)(ye()),Ie=w(),Ne=r.memo((function(e){var t=r.useState(""),n=Object(y.a)(t,2),c=n[0],o=n[1],u=r.useState(""),s=Object(y.a)(u,2),i=s[0],l=s[1],m=r.useState(!1),f=Object(y.a)(m,2),b=f[0],g=f[1],E=r.useState(!1),h=Object(y.a)(E,2),v=h[0],O=h[1],j=r.useState(""),w=Object(y.a)(j,2),x=w[0],G=w[1],S=r.useState(""),T=Object(y.a)(S,2),I=T[0],N=T[1],k=r.useState(60),_=Object(y.a)(k,2),C=_[0],D=_[1],P=r.useState([]),L=Object(y.a)(P,2),F=L[0],W=L[1],M=r.useState(0),R=Object(y.a)(M,2),X=R[0],J=R[1],z=r.useState(null),V=Object(y.a)(z,2),Y=V[0],q=V[1],H=r.useState(""),Q=Object(y.a)(H,2),Z=Q[0],ee=Q[1],te=r.useState(""),ne=Object(y.a)(te,2),re=ne[0],ce=ne[1],ue=r.useRef(null),se=$(),ie=se.getWpm,le=se.calculateCompletionPercent;r.useEffect((function(){if(e.typingText){var t=setInterval((function(){D((function(e){return e-1}))}),1e3);q(t)}return function(){clearInterval(Y)}}),[e.typingText]),r.useEffect((function(){J(ie(Z.split(" ").join(""),C)),0===C&&fe()}),[C]),r.useEffect((function(){e.passedGames.length&&Ie.setItem("passedGames-".concat(e.userData.id),e.passedGames)}),[e.passedGames]);var me=function(t){e.setTypingText(t),l(t),W(t.split(" ")),g(!1),ue.current.focus()},fe=function(){clearInterval(Y);var t=Z?Z.split(" ").length:0,n=Z?Z.split(" ").length:0,a=[].concat(Object(A.a)(e.passedGames),[{wpm:X,correctWordsCount:n,completionPercent:le(t,i)}]);e.setPassedGame(a),O(!1),D(60),l(""),J(0),ee(""),N(""),G(""),o("")},pe=function(e){if("Backspace"===e)if(x){var t=x.substring(x.length-1);G(x.substring(0,x.length-1)),l("".concat(t).concat(i))}else{var n=I.substring(I.length-1);N((function(e){return e.substring(0,e.length-1)})),l("".concat(n).concat(i))}},be=function(e){x||i[0]!==e||"Backspace"===e||(N((function(t){return"".concat(t).concat(e)})),l(i.substring(1))),(x&&i[0]===e||i[0]!==e)&&"Backspace"!==e&&(G("".concat(x).concat(i[0])),l(i.substring(1)))},ge=function(e){" "!==e||F[0]!==I||x||(o(""),ee((function(e){return"".concat(e).concat(I," ")})),N(""),G(""),W((function(e){var t=Object(A.a)(e);return t.splice(0,1),t})))};return r.createElement("div",null,r.createElement(je,null),re&&r.createElement(d.a,{variant:"danger"},re),r.createElement(oe,{time:C,wpm:X}),r.createElement("div",{className:Ge},r.createElement(ae,{isLoading:b}),r.createElement(K,{characters:Z,showCursor:!1,color:"blue",testId:"passed-words"}),r.createElement(K,{characters:I,showCursor:!x,color:"blue",testId:"correct-chars"}),x&&r.createElement(K,{characters:x,showCursor:!!x,color:"red",testId:"wrong-chars"}),i||null),r.createElement("input",{disabled:!i,ref:ue,type:"text",className:Se,onKeyDown:function(e){var t;(t=e.key).length>1&&"Backspace"!==t||(be(e.key),pe(e.key),ge(e.key))},onChange:function(e){o(e.target.value),""===e.target.value&&(l("".concat(I).concat(x).concat(i)),N(""),G(""))},placeholder:"Type the above text here",value:c}),r.createElement(p.a,{disabled:v,className:Te,onClick:function(){g(!0),O(!0),ce(""),function(e,t,n){var r,c={method:t,headers:{"Content-Type":"application/json"}};return r=n?Object(a.a)({},c,{body:JSON.stringify(n)}):Object(a.a)({},c),fetch(e,r).then(U,B)}("https://cors-anywhere.herokuapp.com/https://baconipsum.com/api/?type=all-meat=1","GET").then((function(e){me(e[0])})).catch((function(e){g(!1),O(!1),ce("".concat(e,". Try again")),console.log(e)}))}},"Start"),r.createElement(de,null))})),ke=Object(o.b)((function(e){return{typingText:R(e),passedGames:se(e),userData:be(e)}}),(function(e){return{setTypingText:function(t){return e(function(e){return{type:"SET_TYPING_TEXT",payload:e}}(t))},setPassedGame:function(t){return e(T(t))}}}))(Ne),_e=n(58),Ce=r.memo((function(e){var t=e.children,n=Object(_e.a)(e,["children"]),a=S().isLoggedIn;return r.createElement(m.b,Object.assign({},n,{render:function(e){return a()?t:r.createElement(m.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}));function De(){var e=Object(i.a)(["\n    position: relative;\n"]);return De=function(){return e},e}var Pe=Object(l.a)(De()),Le=function(){return r.createElement(W.a,{className:Pe},r.createElement(M.a,null,r.createElement(m.d,null,r.createElement(m.b,{exact:!0,path:"/speedType"},r.createElement(m.a,{to:"/play"})),r.createElement(m.b,{exact:!0,strict:!0,path:"/login"},r.createElement(F,null)),r.createElement(Ce,{exact:!0,path:"/play"},r.createElement(ke,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Fe,We={typingText:"",passedGames:[],userData:null},Me=w(),Ae=Me.getItem("user"),Ue=Ae&&Me.getItem("passedGames-".concat(Ae.id))?Me.getItem("passedGames-".concat(Ae.id)):We.passedGames,Be=Object(a.a)({},We,{passedGames:Ue,userData:Ae||We.userData}),Re=Object(u.d)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TYPING_TEXT":return Object(a.a)({},e,{typingText:t.payload});case"SET_PASSED_GAME":return Object(a.a)({},e,{passedGames:t.payload?t.payload:[]});case"TOGGLE_LOGE_IN":return Object(a.a)({},e,{userData:t.payload});default:return e}}),Be,(Fe="typeRacer",window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({name:Fe})||u.c)(Object(u.a)(s.a)));c.render(r.createElement(o.a,{store:Re},r.createElement(Le,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[60,1,2]]]);
//# sourceMappingURL=main.b7a4f8d5.chunk.js.map